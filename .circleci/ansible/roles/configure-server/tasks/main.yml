#- name: Install Python
 # raw: apt -y update && apt install -y python-minimal
  #when: user_sdf_exist is succeeded
  
- name: "update apt packages."
  become: yes
  apt:
    update_cache: yes


- name: "upgrade packages"
  become: yes
  apt:
    upgrade: yes

- name: "remove dependencies that are no longer required"
  become: yes
  apt:
    autoremove: yes


- name: Wait 600 seconds for target connection to become reachable/usable
  ansible.builtin.wait_for_connection:

- name: "install dependencies."
  become: yes
  apt:
    name: ["nodejs", "npm" ]
    state: latest
    update_cache: yes
    
- name: install node
  shell: |
    curl -sL https://deb.nodesource.com/setup_13.x | sudo -E bash - && sudo apt-get install -y nodejs
    
- name: Install PM2
  npm:
    name: pm2
    global: yes

#- name: Install bottle python package
 # ansible.builtin.pip:
  #  name: bottle




